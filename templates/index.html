{% extends "base.html" %}

{% block title %}File Upload and Analysis - Home{% endblock %}

{% block content %}
    <h1>File Upload and Analysis</h1>
    <p class="subtitle">Upload a file to analyze its content and properties</p>
    
    <div class="info-box">
        <strong>Supported file types:</strong> TXT, PDF, PNG, JPG, JPEG, GIF, CSV, JSON, XML, DOC, DOCX<br>
        <strong>Maximum file size:</strong> 16 MB
    </div>
    
    <form method="POST" action="{{ url_for('upload_file') }}" enctype="multipart/form-data" class="upload-form" id="uploadForm">
        <div class="file-input-wrapper">
            <button type="button" class="file-input-button">Choose File</button>
            <input type="file" name="file" id="fileInput" required>
            <span class="file-name" id="fileName">No file chosen</span>
        </div>
        <br>
        <button type="submit" class="submit-button" id="submitButton" disabled>Upload and Analyze</button>
    </form>
    
    <div class="info-box">
        <h3 style="margin-bottom: 10px;">What this app does:</h3>
        <ul style="margin-left: 20px; line-height: 1.6;">
            <li>Detects file type and MIME type</li>
            <li>Calculates file size</li>
            <li>For text files: counts lines, words, and characters</li>
            <li>For CSV files: counts rows and columns</li>
            <li>For JSON files: validates structure and shows keys/elements</li>
            <li>Provides content preview when available</li>
        </ul>
    </div>
{% endblock %}

{% block scripts %}
<script>
    const fileInput = document.getElementById('fileInput');
    const fileName = document.getElementById('fileName');
    const submitButton = document.getElementById('submitButton');
    
    fileInput.addEventListener('change', function(e) {
        if (e.target.files.length > 0) {
            fileName.textContent = e.target.files[0].name;
            submitButton.disabled = false;
        } else {
            fileName.textContent = 'No file chosen';
            submitButton.disabled = true;
        }
    });
</script>
{% endblock %}
